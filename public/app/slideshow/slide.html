<html>
	<head>
		<link rel="stylesheet" type="text/css" href="css/styles.css"/>
		<script type="text/javascript" src="js/jquery.js"></script>
	</head>

	<body>
		
		<div class = 'book'>
			<div class = 'pages'>
				<div class = 'page left'>
					<div class = 'front'>Page 1 front</div>
					<div class = 'back'>Page 1 back</div>
				</div>
				
				<div class = 'page right'>
					<div class = 'front'>Page 2 front</div>
					<div class = 'back'>Page 2 back</div>
				</div>

				<div class = 'page left'>
					<div class = 'front'>Page 3 front</div>
					<div class = 'back'>Page 3 back</div>
				</div>

				<div class = 'page right'>
					<div class = 'front'>Page 4 front</div>
					<div class = 'back'>Page 4 back</div>
				</div>
			</div>
		</div>

		<div class = 'control'>
			<div class = 'prev' onClick = 'slide.prevPage()'>
				<span>PREV PAGE</span>
			</div>
			<div class = 'next' onClick = 'slide.nextPage()'>
				<span>NEXT PAGE</span>
			</div>
		</div>

		<script type="text/javascript">
			var slide = function() {
				var bookNumber = 1,
					pageNumber = 1
					;

				var hasMoreNextPages = function() {
					return !$(getCurrentPage()).is(':last-child');
				};

				var hasMorePreviousPages = function() {
					return !$(getCurrentPage()).is(':first-child');
				};

				var getCurrentBook = function() {
					return $('.book').get(getCurrentBookNumber()-1);
				};

				var getCurrentPage = function(val) {
					var book = getCurrentBook();
					return $(book).find('.page:eq('+(getCurrentPageNumber())+')');
				};

				var getCurrentBookNumber = function() {
					return bookNumber;
				};

				var getCurrentPageNumber = function(val) {
					return pageNumber;
				};

				var incrementPageNumber = function() {
					pageNumber++;
				};

				var decrementPageNumber = function() {
					pageNumber--;
				}

				return {
					prevPage: function() {
						if(hasMorePreviousPages()) {
					 		var page = getCurrentPage();
					 		$(page).addClass('leftPageTransition');
					 		$(page).css('z-index', 4);
							$(page).children('.back').addClass('backfaceVisibility');
							$(page).children('.front').css('display', 'none');
							decrementPageNumber();
					 	} else 
					 		console.log('first page');
					},

					nextPage: function() {
					 	if(hasMoreNextPages()) {
					 		var page = getCurrentPage();
					 		$(page).addClass('rightPageTransition');
					 		$(page).css('z-index', 3);
							$(page).children('.back').addClass('backfaceVisibility');
							$(page).children('.front').css('display', 'none');
							incrementPageNumber();
						} else 
					 		console.log('last page');
					}
				}
			}();

			function prevPage() {
				$('.page.left').addClass('leftPageTransition');
				$('.page.left .back').addClass('backfaceVisibility');
				$('.page.left .front').css('display', 'none');
			}

			function nextPage() {
				$('.page.right').addClass('rightPageTransition');
				$('.page.right .back').addClass('backfaceVisibility');
				$('.page.right .front').css('display', 'none');
			}

			function h() {
				var newStyles = {};
				newStyles[window.transitionStyle] = window.transformStyle + " 1s cubic-bezier(0.09,0.25,0.00,1.00)";
				$(".left").css(newStyles);
				$(".right").css(window.transformStyle, "rotateY(180deg)");
			}
		</script>
	</body>
</html>