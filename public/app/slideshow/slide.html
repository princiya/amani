<html>
	<head>
		<link rel="stylesheet" type="text/css" href="css/styles.css"/>
		<script type="text/javascript" src="js/jquery.js"></script>
	</head>

	<body>
		
		<div class = 'book'>
			<div class = 'pages'>
				<div class = 'page left'>
					<div class = 'front'>Page 1 front</div>
					<div class = 'back'>Page 1 back</div>
				</div>
				
				<div class = 'page right'>
					<div class = 'front'>Page 2 front</div>
					<div class = 'back'>Page 2 back</div>
				</div>

				<div class = 'page left'>
					<div class = 'front'>Page 3 front</div>
					<div class = 'back'>Page 3 back</div>
				</div>

				<div class = 'page right'>
					<div class = 'front'>Page 4 front</div>
					<div class = 'back'>Page 4 back</div>
				</div>

				<div class = 'page left'>
					<div class = 'front'>Page 5 front</div>
					<div class = 'back'>Page 5 back</div>
				</div>

				<div class = 'page right'>
					<div class = 'front'>Page 6 front</div>
					<div class = 'back'>Page 6 back</div>
				</div>
			</div>
		</div>

		<div class = 'book'>
			<div class = 'pages'>
				<div class = 'page left'>
					<div class = 'front'>Page 1 front</div>
					<div class = 'back'>Page 1 back</div>
				</div>
				
				<div class = 'page right'>
					<div class = 'front'>Page 2 front</div>
					<div class = 'back'>Page 2 back</div>
				</div>

				<div class = 'page left'>
					<div class = 'front'>Page 3 front</div>
					<div class = 'back'>Page 3 back</div>
				</div>

				<div class = 'page right'>
					<div class = 'front'>Page 4 front</div>
					<div class = 'back'>Page 4 back</div>
				</div>

				<div class = 'page left'>
					<div class = 'front'>Page 5 front</div>
					<div class = 'back'>Page 5 back</div>
				</div>

				<div class = 'page right'>
					<div class = 'front'>Page 6 front</div>
					<div class = 'back'>Page 6 back</div>
				</div>
			</div>
		</div>

		<div class = 'book'>
			<div class = 'pages'>
				<div class = 'page left'>
					<div class = 'front'>Page 1 front</div>
					<div class = 'back'>Page 1 back</div>
				</div>
				
				<div class = 'page right'>
					<div class = 'front'>Page 2 front</div>
					<div class = 'back'>Page 2 back</div>
				</div>

				<div class = 'page left'>
					<div class = 'front'>Page 3 front</div>
					<div class = 'back'>Page 3 back</div>
				</div>

				<div class = 'page right'>
					<div class = 'front'>Page 4 front</div>
					<div class = 'back'>Page 4 back</div>
				</div>

				<div class = 'page left'>
					<div class = 'front'>Page 5 front</div>
					<div class = 'back'>Page 5 back</div>
				</div>

				<div class = 'page right'>
					<div class = 'front'>Page 6 front</div>
					<div class = 'back'>Page 6 back</div>
				</div>
			</div>
		</div>

		<div class = 'control'>
			<div class = 'prev' onClick = 'slide.prevPage()'>
				<span>PREV PAGE</span>
			</div>
			<div class = 'next' onClick = 'slide.nextPage()'>
				<span>NEXT PAGE</span>
			</div>
		</div>

		<div class = 'vertical-control'>
			<div class = 'top' onClick = 'slide.prevBook()'>
				<span>PREV BOOK</span>
			</div>
			<div class = 'bottom' onClick = 'slide.nextBook()'>
				<span>NEXT BOOK</span>
			</div>
		</div>

		<script type="text/javascript">
			var slide = function() {
				var bookNumber = 1,
					previousPageNumber = 4,
					nextPageNumber = 1
					;

				var hasMoreNextPages = function() {
					return !$(getCurrentPage('next')).is(':last-child');
				};

				var hasMorePreviousPages = function() {
					return !$(getCurrentPage('prev')).is(':first-child');
				};

				var getCurrentBook = function() {
					return $('.book').get(getCurrentBookNumber());
				};

				var getCurrentPage = function(val) {
					var book = getCurrentBook();
					return $(book).find('.page:eq('+(getCurrentPageNumber(val))+')');
				};

				var getCurrentBookNumber = function() {
					return bookNumber;
				};

				var getCurrentPageNumber = function(val) {
					if(val == 'prev')
						return previousPageNumber;
					return nextPageNumber;
				};

				var incrementPageNumber = function() {
					nextPageNumber+=2;
				};

				var decrementPageNumber = function() {
					previousPageNumber-=2;
				}

				return {
					prevPage: function() {
						if(hasMorePreviousPages()) {
					 		var page = getCurrentPage('prev');
					 		$(page).addClass('leftPageTransition');
					 		$(page).css('z-index', 4);
							$(page).children('.back').addClass('backfaceVisibility');
							$(page).children('.front').css('display', 'none');
							decrementPageNumber();
					 	} else 
					 		console.log('first page');
					},

					nextPage: function() {
					 	if(hasMoreNextPages()) {
					 		var page = getCurrentPage('next');
					 		$(page).addClass('rightPageTransition');
					 		$(page).css('z-index', 3);
							$(page).children('.back').addClass('backfaceVisibility');
							$(page).children('.front').css('display', 'none');
							incrementPageNumber();
						} else 
					 		console.log('last page');
					},

					prevBook: function() {
						$('.book').eq(bookNumber).removeClass('animation-next');
						$('.book').eq(bookNumber).removeClass('animation-prev');
						$('.book').eq(bookNumber).addClass('animation-prev');
					},

					nextBook: function() {
						$('.book').eq(bookNumber).removeClass('animation-prev');
						$('.book').eq(bookNumber).removeClass('animation-next');
					 	$('.book').eq(bookNumber).addClass('animation-next');
					}
				}
			}();
		</script>
	</body>
</html>